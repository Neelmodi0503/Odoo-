<?xml  version ="1.0" encoding="UTF-8"?>
<odoo>

    <record id ="view_hospital_patient_tree" model="ir.ui.view">
        <field name="name">hospital.patient.tree</field>
        <field name="model">hospital.patient</field>
        <field name="arch" type="xml">
            <tree string="Patients">
                <field name="name"/>
                <field name="age" readonly="1"/>
                <field name = "payment_status"/>
                <field name="date_of_birth" optional="hide"/>
                <field name="gender" optional="show"/>

            </tree>
        </field>
    </record>

    <record id = "patient_serach_view" model="ir.ui.view">
        <field name="name">hospital.patient.search</field>
        <field name="model">hospital.patient</field>
        <field name = "arch" type="xml">
            <search string = "Search Patient">
                <field name = "name"/>
                <field name = "gender"/>
                <field name="contact_no"/>
                <filter name="male" string="Male" domain="[('gender','=','male')]" />
                <filter name="female" string="Female" domain="[('gender','=','female')]" />

            </search>
        </field>
    </record>


   

    <record id ="view_hospital_patient_form" model="ir.ui.view">
        <field name="name">hospital.patient.form</field>
        <field name="model">hospital.patient</field>
        <field name="arch" type="xml">
            <form string="Patient Form" class="o_form_view">

                <header>
                    <button name="action_save_and_new" string="Save and New" type="object" class="btn-primary"/>
                    <button name="get_senior_patients" string="Get Senior Patients" type="object" class="btn-primary"/>
                    <button name="add_new_patient" string="Add Patients " type="object" class="btn-primary"/>
                </header>

                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="age"/>
                            <field name="email" widget="email"/>
                            <field name = "contact_no" widget="phone"/>
                        </group>
                        
                        <group>
                            <field name="date_of_birth" optional="show"/>
                            <field name="payment_status"/>
                            <field name ="tag_ids" widget="many2many_tags"/>
                            <field name = "marital_status"/>
                        </group>
                         <group>
                         <field name = "shipping_status"/>
                         <field name = "tracking_number"/>
                         <field name = "shipping_price"/>  
                         </group> 

                    </group>
                    
                     <button name="action_pay_now" type="object"
                            string="Pay Now" class="btn-primary"
                            modifiers="{'invisible': [('payment_status','=','paid')]}"/>

                    <button name = "action_shipping" type = "object"
                            string = "Fetch Price " class="btn-primary"
                       />
                       <button name = "action_update_tracking" type = "object"
                            string = " Track " class="btn-primary" />


                </sheet>
                
                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>


              


            </form>
        </field>
    </record>



    <record id ="action_hospital_patient" model="ir.actions.act_window">
        <field name ="name">Patients</field>
        <field name ="res_model">hospital.patient</field>
        <field name ="view_mode">tree,form</field>
        <field name="search_view_id" ref="hospital_management.patient_serach_view"/>
        <field name = 'help' type='html'>
            <p class="o_view_nocontent_smiling_face">
                Create your first patient
            </p>
        </field>
    </record>


<record id="view_form_hospital_patient" model="ir.ui.view">
    <field name="name">hospital.patient.form.api</field>
    <field name="model">hospital.patient</field>
    <field name="inherit_id" ref="hospital_management.view_hospital_patient_form"/>
    <field name="arch" type="xml">
        <xpath expr="//sheet" position="inside">
            <group string="External API Data">
                <field name="external_data"/>
                <button string="Fetch External Data" type="object" name="fetch_external_data" class="oe_highlight"/>
            </group>
        </xpath>
    </field>
</record>


               

    <template id="payment_dummy_template" name="Dummy Payment Page">
        <t t-call="web.layout">
            <div class="oe_structure container mt-5">
                <h2>Dummy Payment Page</h2>
                <p>Hello <t t-esc="patient.name"/>
 ðŸ‘‹</p>
                <p>Status: <strong>
                    <t t-esc="patient.payment_status"/>
                </strong>
            </p>
            <p>âœ… Refreshing this page marks your payment as done automatically.</p>
        </div>
    </t>
</template>



</odoo>
            